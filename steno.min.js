(function(n){function ot(n){for(var r=new e(gt),t=[],i;i=r.exec(n);)t.push(i[1]);return t.join(y)}function st(n){for(var u=new e(ni),i={},r;r=u.exec(n);)i[r[1]]=r[2];return p(i,t),i}function ht(n,u){i(f,u)&&(u=!1);var b=new e(et),o=b.exec(n),l,c,s,a=null;return(p(o,t),o[5]===t&&(o[5]=bt),l=ot(o[7]),c=st(o[8]),o[6]&&(c.id=o[6]),l&&(c[v]=c[v]?l+y+c[v]:l),s=o[10],s?(s=ut(s),w(s)&&(s=1)):s=1,o[11]&&(a=o[11]),!u)?r(!0,{},h,{name:o[5],attributes:c,text:o[9],multiplier:s,context:a}):{name:o[5],attributes:c,text:o[9],multiplier:s,context:a}}function ct(n){for(var a,s,v,u,o,l,g,nt=new e(et),b=[],d;v=nt.exec(n);){if(p(v,t),v[0]===t)break;b.push(v)}for(s=r(!0,{},h),u=c(s),a=0;a<b.length;a++){d=b[a][1];switch(d.charAt(0)){case y:case k:case"(":u=c(u);break;case"+":i(f,u.parent)&&(u.parent=r(!0,{},h));u=c(u.parent);break;case"^":o=u.parent||u;u=c(o.parent||o);break;case")":for(o=u.parent;o.name!==t;)o=o.parent;l=b[a][4];l?(l=ut(l),w(l)&&(l=1)):l=1;o.multiplier=l;u=o||g||u;break;default:r(u,ht(d,!0))}}return s.name===t&&s.children.length===1&&(s=s.children[0],s.parent=null),lt(s)}function lt(n){for(var t=n,i=t.parent;i!=null;)t=i,i=t.parent;return t}function c(n,t){return i(f,t)&&(t=r(!0,{},h)),t.parent=n,n.children.push(t),t}function d(n,t){var r,u=n.split("."),i=t;for(r in u)i=i[u[r]];return i}function g(n,t){for(var o=new e(ti),i=[],f=[],r,u;r=o.exec(n);)i.push(r[0]),f.push(d(r[1],t));for(u in i)n=n.replace(i[u],f[u]);return n}function nt(n,r){if(i(pt,n))return nt(ct(n),r);r=n.context?d(n.context,r):r;var u,v,o=r,h=n.name,p=n.attributes,tt=n.multiplier,it=n.text,w=n.children,b=t;i(s,r)||(o=n.context&&i(f,r)?[]:[r||{}]);for(v in o){var c=o[v],e=t,l=t,a=t;if(h){e+="<"+h;for(u in p)e+=y+u+'="'+g(p[u],c)+'"';e+=k;a="<\/"+h+k+a}l+=g(it,c);for(u in w)l+=nt(w[u],c);for(u=0;u<tt;u++)b+=e+l+a}return b}function ri(n){var i=n.replace(/\\/g,"\\\\").replace(/'/g,"\\'"),t=new Function("context","return steno.html('"+i+"',context);");return t.render=t,t}function at(n,t){return vt.call(t,n)}function i(n,t){var i=n.toString().split(l),r=!1;for(var u in i)if(i[u]===b){if(tt(t)!==o||t.nodeType||t===t.window)continue;if(t.constructor&&!at("isPrototypeOf",t.constructor.prototype))continue;r=!0;break}else if(tt(t)===i[u]){r=!0;break}return r}function tt(n){if(typeof n===a)return a;if(n===null)return ft;var i=yt.call(n).match(/^\[object\s(.*)\]$/),r=i&&i[1]||t;switch(r){case"Number":return w(n)?"nan":kt;case"String":case"Boolean":case"Array":case"Date":case"RegExp":case"Function":return r.toLowerCase()}return typeof n===o?o:undefined}function ui(n){return i(f,n)?t:n.toString().replace(ii,t)}function p(n,t){if(!i(o+l+s,n))return n;for(var r in n)i(f,n[r])&&(n[r]=t);return n}function fi(n){return n[rt.floor(rt.random()*n.length)]}function r(){var e,f,u,t,a,n=arguments[0]||{},h=1,v=arguments.length,c=!1;for(i(wt,n)&&(c=n,n=arguments[h++]||{}),typeof n===o||i(dt,n)||(n={});h<v;h++)if(e=arguments[h],e!=null)for(f in e)(u=n[f],t=e[f],t!==n)&&(c&&t&&i(b+l+s,t)?(a=i(s,t)?u&&i(s,u)?u:[]:u&&i(b,u)?u:{},n[f]=r(c,a,t)):t!==undefined&&(n[f]=t));return n}var u={},it=Object.prototype,vt=it.hasOwnProperty,yt=it.toString,w=isNaN,e=RegExp,rt=Math,ut=parseInt,pt="string",wt="boolean",ft="null",l="|",a="undefined",f=ft+l+a,t="",bt="div",v="class",o="object",s="array",b="plain object",kt="number",y=" ",k=">",dt="function",et=/(( |\+|\^|>|\()|(\))(?:\*(\d+))?|([a-z]+[0-9]?)?(?:#([a-z0-9-]+))?((?:\.[a-z0-9-_]+)*)((?:\[(?:[a-z0-9-_]+(?:="(?:\\.|[^\n\r"\\])*")?[\t ]?)+\])*)(?:\{((?:\\.|[^\n\r\\}])*)\})?(?:\*(\d+))?(?:\\([a-z0-9._-]+))?)/g,gt=/\.([a-z0-9-_]+)/g,ni=/([a-z0-9-_]+)(?:="((?:\\.|[^\n\r"\\])*)")?/g,ti=/\\([a-z\$_.-]+)/g,ii=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,h={parent:null,name:t,attributes:{},children:[],text:t,multiplier:1,context:null};r(u,{classes:ot,attributes:st,element:ht,dom:ct,html:nt,redo:lt,add:c,render:g,context:d,compile:ri,el:h,extend:r,has:at,is:i,objectType:tt,trim:ui,random:fi,nullify:p});typeof n!==a&&n!=null&&function(){var t=n.steno;return u.noConflict=function(i){return i&&n.steno===u&&(n.steno=t),u},n.steno=u,u}()})(function(){return this}());
//# sourceMappingURL=steno.min.js.map
